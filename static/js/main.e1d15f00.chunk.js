(window.webpackJsonpweb=window.webpackJsonpweb||[]).push([[0],{103:function(e,a,t){},114:function(e,a,t){},115:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(14),o=t.n(i),s=(t(103),t(7)),l=t(8),c=t(12),u=t(10),m=t(5),h=t(11),d=(t(78),t(17)),f=t(60),b=t.n(f),v=(t(104),t(106),{apiKey:"AIzaSyABV35W-LGbtEVMZNVKFtHO9fczQp_b-yY",authDomain:"leiturama-40e49.firebaseapp.com",databaseURL:"https://leiturama-40e49.firebaseio.com",projectId:"leiturama-40e49",storageBucket:"leiturama-40e49.appspot.com",messagingSenderId:"697487135295",appId:"1:697487135295:web:5c4d501e75585b13f35e8a"}),p=function(){function e(){var a=this;Object(s.a)(this,e),this.doSignOut=function(){return a.auth.signOut()},this.doPasswordReset=function(e){return a.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return a.auth.currentUser.updatePassword(e)},b.a.initializeApp(v),this.auth=b.a.auth(),this.firestore=b.a.firestore(),this.authUser=null}return Object(l.a)(e,[{key:"doSignUp",value:function(e,a,t,n){this.auth.createUserWithEmailAndPassword(e,a).then((function(e){return t(e)})).catch((function(e){return n(e)}))}},{key:"doSignIn",value:function(e,a,t){this.auth.signInWithEmailAndPassword(e,a).catch(t)}}]),e}(),E=r.a.createContext(null),g=function(e){return function(a){return r.a.createElement(E.Consumer,null,(function(t){return r.a.createElement(e,Object.assign({},a,{firebase:t}))}))}},C=E,k=p;function j(e){return r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement(d.b,{to:"/"}," ",r.a.createElement("img",{alt:"imagem da logo",src:t(66),height:"120px"})," ")),r.a.createElement("ul",{className:"navLinks"},r.a.createElement("li",null,r.a.createElement(d.b,{to:"/escola"}," Escola ")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/professor"}," Professores ")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/turma"}," Turmas "))),r.a.createElement("div",null,r.a.createElement("a",{href:"#"},r.a.createElement("div",{className:"btnLogout",onClick:function(a){return e.firebase.doSignOut()}},"Sair"))))}function O(e){return r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement(d.b,{to:"/"}," ",r.a.createElement("img",{alt:"imagem da logo",src:t(66),height:"120px"})," ")),r.a.createElement("ul",{className:"navLinks"},r.a.createElement("li",null,r.a.createElement(d.b,{to:"/turma/professor"}," Turmas ")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/livros/professor"}," Livros ")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/registros"}," Registros "))),r.a.createElement("div",null,r.a.createElement("a",{href:"#"},r.a.createElement("div",{className:"btnLogout",onClick:function(a){return e.firebase.doSignOut()}},"Sair"))))}function y(e){return r.a.createElement("header",null,r.a.createElement(d.b,{to:"/"}," ",r.a.createElement("img",{alt:"imagem da logo",src:t(66),height:"120px"})," "),r.a.createElement("ul",{className:"navLinks"},r.a.createElement("li",null,r.a.createElement(d.b,{to:"/download"}," Download APK "))))}var S=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={usuarioLogado:null},t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.props.authUser?this.props.authUser.profiles.administrator?r.a.createElement(j,{firebase:this.props.firebase}):this.props.authUser.profiles.professor?r.a.createElement(O,{firebase:this.props.firebase}):void 0:r.a.createElement(y,null)}}]),a}(r.a.Component)),P=t(43),U=t(24),w=t(161),L=t(149),A=t(141),D=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={nomeEscola:"",cnpj:"",endereco:""},t.componentDidMount=t.componentDidMount.bind(Object(m.a)(t)),t.onChange=t.onChange.bind(Object(m.a)(t)),t.salvar=t.salvar.bind(Object(m.a)(t)),t.cancelar=t.cancelar.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return console.log("Escola - rendered"),r.a.createElement(A.a,{fixed:!0},r.a.createElement("h1",null,"Escola"),r.a.createElement("div",null,r.a.createElement(w.a,{fullWidth:!0,id:"iptNomeEscola",name:"nomeEscola",label:"Escola",placeholder:"Nome da escola",margin:"normal",variant:"outlined",onChange:this.onChange,value:this.state.nomeEscola})),r.a.createElement("div",null,r.a.createElement(w.a,{fullWidth:!0,id:"iptCnpjEscola",name:"cnpj",label:"CNPJ",margin:"normal",variant:"outlined",onChange:this.onChange,value:this.state.cnpj})),r.a.createElement("div",null,r.a.createElement(w.a,{fullWidth:!0,id:"iptEndereco",name:"endereco",label:"Endere\xe7o",multiline:!0,rows:"6",margin:"normal",variant:"outlined",onChange:this.onChange,value:this.state.endereco})),r.a.createElement("div",null,r.a.createElement(L.a,{variant:"contained",color:"primary",onClick:this.salvar},"Salvar"),"\xa0",r.a.createElement(L.a,{variant:"contained",color:"secondary",onClick:this.cancelar},"Cancelar")))}},{key:"componentDidMount",value:function(){var e=this;console.log("Escola - componentDidMount"),this.props.firebase.firestore.collection("school").doc("ftHhzHgJB1XTR9dDgbE8").get().then((function(a){if(a.exists){var t=a.data();e.setState(Object(U.a)({},t)),e.initialState=Object(U.a)({},t)}})).catch((function(e){console.log("Escola - Erro na busca dos dados da escola",e)}))}},{key:"onChange",value:function(e){this.setState(Object(P.a)({},e.target.name,e.target.value))}},{key:"salvar",value:function(e){this.props.firebase.firestore.collection("school").doc("ftHhzHgJB1XTR9dDgbE8").set(Object(U.a)({},this.state)).then((function(){console.log("Dados da escola salvos com sucesso")}))}},{key:"cancelar",value:function(e){this.setState(Object(U.a)({},this.initialState))}}]),a}(r.a.Component)),T=t(36),z=function e(){Object(s.a)(this,e),this.adm={email:"",id:"",name:"",phone:""},this.name="",this.members=[]},N=t(150),W=t(153),B=t(151),M=t(154),x=t(152),I=t(51),R=t.n(I),F=t(157),q=t(163),_=t(147),H=t(162),V=function(){function e(a){Object(s.a)(this,e),this.firebase=a,this.getAll=this.getAll.bind(this)}return Object(l.a)(e,[{key:"getAll",value:function(e){var a=[];this.firebase.firestore.collection("user").where("profiles.professor","==",!0).get().then((function(t){t.forEach((function(e){var t=e.data();t.id=e.id,a.push(t)})),e(a)}))}},{key:"atualizar",value:function(e,a,t,n){this.firebase.firestore.collection("user").doc(e).set(a).then(t()).catch(n(n))}},{key:"inserir",value:function(e,a,t){this.firebase.firestore.collection("teachers").add(e).then(a()).catch(t(t))}},{key:"autorizarUsuario",value:function(e,a){this.firebase.firestore.collection("user").doc(e).set(a).then(console.log("user adicionado com sucesso")).catch((function(e){return console.log(e)}))}},{key:"apagarTeacher",value:function(e){this.firebase.firestore.collection("teachers").doc(e).delete().then((function(){console.log("teacher deletado com sucesso")})).catch((function(e){console.log(e)}))}},{key:"carregarDadosIniciaisProfessor",value:function(e,a){this.firebase.firestore.collection("teachers").where("email","==",e).get().then((function(e){if(e.empty)a(null);else{var t=e.docs[0].data();t.id=e.docs[0].id,a(t)}}))}}]),e}(),J=function(){function e(a){Object(s.a)(this,e),this.firebase=a,this.salvar=this.salvar.bind(this),this.atualizar=this.atualizar.bind(this)}return Object(l.a)(e,[{key:"salvar",value:function(e,a){var t={};t.name=e.name,t.members=[],t.adm=e.adm,this.firebase.firestore.collection("library").add(t).then(a).catch((function(e){console.log("Error saving document:",e)}))}},{key:"atualizar",value:function(e,a){this.firebase.firestore.collection("library").doc(e.id).set(e).then((function(){a()})).catch((function(e){console.log("Error updating document:",e)}))}},{key:"getAll",value:function(e){var a=[];this.firebase.firestore.collection("library").get().then((function(t){t.forEach((function(e){var t=e.data();a.push(t)})),e(a)}))}},{key:"getTurmasPorProfessor",value:function(e,a){var t=[];this.firebase.firestore.collection("library").where("adm.id","==",e).get().then((function(e){e.forEach((function(e){var a=e.data();a.id=e.id,t.push(a)})),a(t)}))}},{key:"getAlunoPorTurma",value:function(e,a){this.firebase.firestore.collection("library").doc(e).get().then((function(e){a(e.data())}))}}]),e}(),K=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).persistence=new J(t.props.firebase),t.state={turma:e.turma},t.definirLista=t.definirLista.bind(Object(m.a)(t)),t.confirmarCadastroDados=t.confirmarCadastroDados.bind(Object(m.a)(t)),t.confirmarAtualizacaoDados=t.confirmarAtualizacaoDados.bind(Object(m.a)(t)),t.salvar=t.salvar.bind(Object(m.a)(t)),t.onAdministratorChange=t.onAdministratorChange.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return console.log(this.props.turma),r.a.createElement(A.a,{fixed:!0},r.a.createElement("div",null,r.a.createElement(w.a,{fullWidth:!0,required:!0,id:"name",label:"Nome",margin:"normal",variant:"outlined",onChange:this.props.onChange,value:this.props.turma.name})),r.a.createElement("div",null,r.a.createElement(_.a,{fullWidth:!0},r.a.createElement(H.a,{id:"lblAdministrator"},"  Administrador *"),r.a.createElement(F.a,{fullWidth:!0,id:"administrator",label:"Administrador",variant:"outlined",labelId:"lblAdministrator",value:this.props.turma.adm.id,onChange:this.onAdministratorChange},this.state.listaProfessores?this.state.listaProfessores.map((function(e,a){return r.a.createElement(q.a,{value:e.id,key:e.id},e.name)})):null))),r.a.createElement("div",null,r.a.createElement(L.a,{variant:"contained",color:"primary",onClick:this.salvar},"Salvar")," \xa0",r.a.createElement(L.a,{variant:"contained",color:"secondary",onClick:this.props.cancelarCadastro},"Cancelar")))}},{key:"componentDidMount",value:function(){new V(this.props.firebase).getAll(this.definirLista)}},{key:"definirLista",value:function(e){this.setState({listaProfessores:e})}},{key:"confirmarCadastroDados",value:function(){console.log("Turma salva com sucesso"),this.props.cancelarCadastro()}},{key:"confirmarAtualizacaoDados",value:function(){console.log("Turma atualizada com sucesso"),this.props.cancelarCadastro()}},{key:"onAdministratorChange",value:function(e){var a=e.target.value,t=this.state.listaProfessores.find((function(e){return e.id===a}));delete t.n_borrowed,delete t.n_lent,delete t.n_read,delete t.profiles;var n=this.state.turma;n.adm=t,this.setState({turma:n})}},{key:"salvar",value:function(e){this.state.turma.id?this.persistence.atualizar(this.state.turma,this.confirmarCadastroDados):this.persistence.salvar(this.state.turma,this.confirmarCadastroDados),this.props.cancelarCadastro()}}]),a}(r.a.Component));function X(e){return r.a.createElement("div",null,r.a.createElement(N.a,null,r.a.createElement(B.a,null,r.a.createElement(x.a,null,r.a.createElement(W.a,{align:"center"},"Nome"),r.a.createElement(W.a,{align:"center"},"Administrador"))),r.a.createElement(M.a,null,e.listaTurmas.map((function(a,t){return r.a.createElement(x.a,{key:t,id:t,name:t,onDoubleClick:e.onDoubleClick},r.a.createElement(W.a,{align:"center"},a.name),r.a.createElement(W.a,{align:"center"},a.adm.name))})))))}function G(e){return r.a.createElement("h2",null,"Carregando turmas")}var Q=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).turmaPersistence=new J(e.firebase),t.state={cadastrar:!1},t.solicitarCadastro=t.solicitarCadastro.bind(Object(m.a)(t)),t.cancelarCadastro=t.cancelarCadastro.bind(Object(m.a)(t)),t.onChangeDadosTurma=t.onChangeDadosTurma.bind(Object(m.a)(t)),t.definirListaTurmas=t.definirListaTurmas.bind(Object(m.a)(t)),t.solicitarAtualizacao=t.solicitarAtualizacao.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.state.cadastrar?r.a.createElement(K,{turma:this.state.turma,firebase:this.props.firebase,cancelarCadastro:this.cancelarCadastro,salvar:this.salvar,onChange:this.onChangeDadosTurma}):this.state.turmas?r.a.createElement("div",null,r.a.createElement(R.a,{onClick:this.solicitarCadastro}),this.state.turmas.length>0?r.a.createElement(X,{listaTurmas:this.state.turmas,onDoubleClick:this.solicitarAtualizacao}):r.a.createElement("h2",null,"N\xe3o h\xe1 turmas cadastradas")):r.a.createElement("div",null,r.a.createElement(R.a,{onClick:this.solicitarCadastro}),r.a.createElement(G,null))}},{key:"onChangeDadosTurma",value:function(e){var a=e.target.id,t=e.target.value,n=this.state.turma;n[a]=t,this.setState({turma:n})}},{key:"solicitarCadastro",value:function(){var e=new z;this.setState({cadastrar:!0,turma:e})}},{key:"solicitarAtualizacao",value:function(e){var a=e.currentTarget.id,t=this.state.turmas[a];console.log(t),this.setState({cadastrar:!0,turma:t})}},{key:"cancelarCadastro",value:function(){this.setState({cadastrar:!1})}},{key:"definirListaTurmas",value:function(e){this.setState({turmas:e})}},{key:"componentDidMount",value:function(){this.turmaPersistence.getAll(this.definirListaTurmas)}}]),a}(r.a.Component)),Y=t(85),Z=t.n(Y);function $(e){return r.a.createElement("h2",null,"Carregando turmas")}var ee=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={},t.turmaPersistence=new J(e.firebase),t.definirListaTurmas=t.definirListaTurmas.bind(Object(m.a)(t)),t.selecionarTurma=t.selecionarTurma.bind(Object(m.a)(t)),t.copyToClipboard=t.copyToClipboard.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.state.visualizarAlunos&&this.state.turma?r.a.createElement(T.a,{to:"/turma/alunos?turma="+this.state.turma.id}):this.state.turmas?this.state.turmas.length?r.a.createElement(N.a,null,r.a.createElement(B.a,null,r.a.createElement(x.a,null,r.a.createElement(W.a,{align:"center"},"Administrador"),r.a.createElement(W.a,{align:"center"},"Nome"),r.a.createElement(W.a,{align:"center"},"Convite"),r.a.createElement(W.a,{align:"center"},"Alunos"))),r.a.createElement(M.a,null,this.state.turmas.map((function(a,t){return r.a.createElement(x.a,{key:t,id:t,name:t},r.a.createElement(W.a,{align:"center"}," ",a.name," "),r.a.createElement(W.a,{align:"center"}," ",a.adm.name," "),r.a.createElement(W.a,{align:"center"},r.a.createElement("input",{id:"link"+a.id,value:"https://leiturama.page.link/?link="+encodeURIComponent("https://leituramaescola.com/"+a.id).replace("%20","+")+"&apn="+encodeURIComponent("com.arthur.leituramaescola").replace("%20","+")+"&afl="+encodeURIComponent("https://leituramaescola.com/").replace("%20","+")}),r.a.createElement("button",{id:"btn"+a.id,onClick:e.copyToClipboard}," Convidar ")),r.a.createElement(W.a,{align:"center"},r.a.createElement(Z.a,{id:t,onClick:e.selecionarTurma})))})))):r.a.createElement("div",null," ",r.a.createElement("h2",null,"N\xe3o h\xe1 turmas cadastradas")," "):r.a.createElement("div",null," ",r.a.createElement($,null)," ")}},{key:"selecionarTurma",value:function(e){var a=e.target.id,t=this.state.turmas[a],n=t?t.members:[];console.log(n),this.setState({visualizarAlunos:!0,turma:t})}},{key:"definirListaTurmas",value:function(e){this.setState({turmas:e})}},{key:"componentDidMount",value:function(){var e=this.props.authUser.id;this.turmaPersistence.getTurmasPorProfessor(e,this.definirListaTurmas)}},{key:"copyToClipboard",value:function(e){var a=e.target.id.substr(3);document.getElementById("link"+a).select(),document.execCommand("copy"),console.log("somente um teste")}}]),a}(r.a.Component)),ae=Q,te=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).dao=new V(e.firebase),t.onClick=t.onClick.bind(Object(m.a)(t)),t.onDoubleClick=t.onDoubleClick.bind(Object(m.a)(t)),t.componentDidMount=t.componentDidMount.bind(Object(m.a)(t)),t.onRequestTeacherUpdate=t.onRequestTeacherUpdate.bind(Object(m.a)(t)),t.state={cadastrarProfessor:!1,atualizarProfessor:!1},t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.state.cadastrar?r.a.createElement(T.a,{to:"/professor?cadastrar=true"}):this.state.atualizar?r.a.createElement(T.a,{to:"/professor?indice="+this.state.indice}):r.a.createElement("div",null,r.a.createElement("div",{onClick:this.onClick},r.a.createElement(R.a,null)),r.a.createElement(N.a,{"aria-label":"customized table"},r.a.createElement(B.a,null,r.a.createElement(x.a,null,r.a.createElement(W.a,{align:"center"},"Nome"),r.a.createElement(W.a,{align:"center"},"Email"),r.a.createElement(W.a,{align:"center"},"Telefone"))),r.a.createElement(M.a,null,this.state.lista?this.state.lista.map((function(a,t){return r.a.createElement(x.a,{id:t,onDoubleClick:e.onDoubleClick,key:t},r.a.createElement(W.a,{align:"center"}," ",a.name," "),r.a.createElement(W.a,{align:"center"}," ",a.email," "),r.a.createElement(W.a,{align:"center"}," ",a.phone," "))})):null)))}},{key:"onClick",value:function(e){this.setState({cadastrar:!0,atualizar:!1})}},{key:"onDoubleClick",value:function(e){var a=e.currentTarget.id;this.setState({cadastrar:!1,atualizar:!0,indice:a})}},{key:"componentDidMount",value:function(){var e=this;this.dao.getAll((function(a){e.props.definirLista(a),e.setState({lista:a})}))}},{key:"onRequestTeacherUpdate",value:function(e){this.setState({indice:e.target.id,cadastrar:!1,atualizar:!0})}}]),a}(r.a.Component)),ne=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).initialState={mudarPagina:!1,professor:{name:"",email:"",phone:""}},t.state=Object(U.a)({},t.initialState),t.onChange=t.onChange.bind(Object(m.a)(t)),t.salvar=t.salvar.bind(Object(m.a)(t)),t.cancelar=t.cancelar.bind(Object(m.a)(t)),t.dao=new V(t.props.firebase),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return console.log("Professor - Cadastro - rendered"),console.log(this.state),this.state.mudarPagina?r.a.createElement(T.a,{to:"/professor"}):r.a.createElement(A.a,{fixed:!0},r.a.createElement("div",null,r.a.createElement(w.a,{fullWidth:!0,id:"name",name:"name",label:"Nome",placeholder:"Nome do professor",margin:"normal",variant:"outlined",onChange:this.onChange,value:this.state.professor.name})),r.a.createElement("div",null,r.a.createElement(w.a,{fullWidth:!0,id:"email",name:"email",label:"E-mail",placeholder:"E-mail do professor",margin:"normal",variant:"outlined",onChange:this.onChange,value:this.state.professor.email})),r.a.createElement("div",null,r.a.createElement(w.a,{fullWidth:!0,id:"phone",name:"phone",label:"Telefone",margin:"normal",variant:"outlined",onChange:this.onChange,value:this.state.professor.phone})),r.a.createElement("div",null,r.a.createElement(L.a,{variant:"contained",color:"primary",onClick:this.salvar},"Salvar"),"\xa0",r.a.createElement(L.a,{variant:"contained",color:"secondary",onClick:this.cancelar},"Cancelar")))}},{key:"componentDidMount",value:function(){if(this.props.lista){var e=this.props.lista[this.props.indice];console.log("didMount Cadastro"),console.log(e),console.log("didMount Cadastro"),this.setState({professor:e})}}},{key:"onChange",value:function(e){var a=this.state.professor;a[e.target.name]=e.target.value,this.setState({professor:a})}},{key:"cancelar",value:function(e){this.setState({mudarPagina:!0})}},{key:"salvar",value:function(e){var a=this,t=Object(U.a)({},this.state.professor),n=t.id;delete t.id,delete t.mudarPagina,n?this.dao.atualizar(n,t,(function(){console.log("Dados do professor atualizados com sucesso"),a.setState({mudarPagina:!0})}),(function(e){return console.log(e.message)})):this.dao.inserir(t,(function(){console.log("Dados do professor atualizados com sucesso"),a.setState({mudarPagina:!0})}),(function(e){return console.log(e.message)})),this.props.firebase.firestore.collection("teachers").add(t).then((function(){console.log("Dados do professor salvos com sucesso"),a.setState({mudarPagina:!0})}))}}]),a}(r.a.Component)),re=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).definirListaProfessores=t.definirListaProfessores.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){if(console.log("Professores - render"),this.props.location.search){if("?indice="===this.props.location.search.substr(0,8)){var e=this.props.location.search.substr(8);return r.a.createElement(ne,{lista:this.state.lista,indice:e})}return r.a.createElement(ne,null)}return r.a.createElement(te,{definirLista:this.definirListaProfessores})}},{key:"definirListaProfessores",value:function(e){this.setState({lista:e})}}]),a}(r.a.Component)),ie=(t(114),t(160)),oe=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state=Object(U.a)({},se),t.onChange=t.onChange.bind(Object(m.a)(t)),t.cancelar=t.cancelar.bind(Object(m.a)(t)),t.autenticar=t.autenticar.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(A.a,{fixed:!0},r.a.createElement("div",null,r.a.createElement(w.a,{fullWidth:!0,id:"email",name:"email",label:"E-mail",placeholder:"email",margin:"normal",variant:"outlined",value:this.state.usuario,onChange:this.onChange})),r.a.createElement("div",null,r.a.createElement(_.a,{variant:"outlined",fullWidth:!0},r.a.createElement(H.a,{htmlFor:"outlined-adornment-password"},"Password"),r.a.createElement(ie.a,{id:"senha",type:"password",value:this.state.senha,onChange:this.onChange,labelWidth:70})),r.a.createElement(d.b,{to:"/esqueci_senha"},"Esqueci a senha")," ",r.a.createElement("br",null),r.a.createElement(d.b,{to:"/professor/primeiroacesso"},"\xc9 seu primeiro acesso professor?")),r.a.createElement("div",{className:"confirmationControl"},r.a.createElement(L.a,{variant:"contained",color:"primary",onClick:this.autenticar},"Autenticar"),"\xa0",r.a.createElement(L.a,{variant:"contained",color:"secondary",onClick:this.cancelar},"Limpar")))}},{key:"onChange",value:function(e){this.setState(Object(P.a)({},e.target.id,e.target.value))}},{key:"cancelar",value:function(){this.setState(Object(U.a)({},se))}},{key:"autenticar",value:function(){this.props.firebase.doSignIn(this.state.email,this.state.senha,this.handleAuthenticationError)}},{key:"handleAuthenticationError",value:function(e){console.log("==================================="),console.log(e),console.log(e.message),console.log("===================================")}}]),a}(r.a.Component),se={email:"",senha:""},le=g(oe),ce=g(function(e){function a(e){var t;return Object(s.a)(this,a),console.log("FrmEsqueciSenha - constructor"),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={email:"",msg:""},t.onChange=t.onChange.bind(Object(m.a)(t)),t.resetar=t.resetar.bind(Object(m.a)(t)),t.cancelar=t.cancelar.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.state.encerrar?r.a.createElement(T.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(w.a,{fullWidth:!0,id:"email",name:"email",label:"E-mail",placeholder:"E-mail",margin:"normal",variant:"outlined",value:this.state.email,onChange:this.onChange}),r.a.createElement("div",{className:"confirmationControl"},r.a.createElement(L.a,{variant:"contained",color:"primary",onClick:this.resetar},"Resetar"),"\xa0",r.a.createElement(L.a,{variant:"contained",color:"secondary",onClick:this.cancelar},"Cancelar"))),this.state.msg?this.state.msg:"")}},{key:"onChange",value:function(e){this.setState({email:e.target.value})}},{key:"resetar",value:function(e){var a=this;this.props.firebase.doPasswordReset(this.state.email).then((function(){a.setState({email:"",msg:"Um email foi enviado para "+a.state.email+" com instru\xe7\xf5es para recuperar sua senha"}),a.setState({encerrar:!0})})).catch((function(e){console.log("falha"),"auth/user-not-found"===e.code?a.setState({msg:"Email n\xe3o encontrado"}):"auth/invalid-email"===e.code?a.setState({msg:"Email inv\xe1lido"}):a.setState({msg:"Falha na opera\xe7\xe3o"})}))}},{key:"cancelar",value:function(){this.setState({encerrar:!0})}},{key:"componentDidMount",value:function(){}}]),a}(r.a.Component)),ue=le,me=t(159),he=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).daoProfessor=new V(t.props.firebase),t.state={user:Object(U.a)({},de)},t.onChange=t.onChange.bind(Object(m.a)(t)),t.onPasswdChange=t.onPasswdChange.bind(Object(m.a)(t)),t.carregarDadosProfessor=t.carregarDadosProfessor.bind(Object(m.a)(t)),t.onClick=t.onClick.bind(Object(m.a)(t)),t.registerUser=t.registerUser.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this;return console.log(this.state),r.a.createElement(A.a,{fixed:!0},r.a.createElement(w.a,{fullWidth:!0,id:"email",name:"email",label:"E-mail",placeholder:"email",margin:"normal",variant:"outlined",value:this.state.user.email,onChange:this.onChange}),r.a.createElement("br",null),this.state.user.name?r.a.createElement("div",null,r.a.createElement(w.a,{fullWidth:!0,id:"name",name:"name",label:"Nome",placeholder:"Nome",margin:"normal",variant:"outlined",value:this.state.user.name,onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement(w.a,{fullWidth:!0,id:"phone",name:"phone",label:"Telefone",placeholder:"Telefone",margin:"normal",variant:"outlined",value:this.state.user.phone,onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement(_.a,{variant:"outlined",fullWidth:!0},r.a.createElement(H.a,{htmlFor:"outlined-adornment-password"},"Password"),r.a.createElement(ie.a,{id:"senha",type:"password",value:this.state.password,onChange:this.onPasswdChange,labelWidth:70}))):null,r.a.createElement("div",{className:"confirmationControl"},r.a.createElement(L.a,{variant:"contained",color:"primary",onClick:this.onClick}," Iniciar "),"\xa0",r.a.createElement(L.a,{variant:"contained",color:"secondary",onClick:function(a){return e.setState({user:Object(U.a)({},de)})}},"Limpar")),r.a.createElement(me.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.errorMessage,autoHideDuration:1e3,onClose:function(){return e.setState({errorMessage:null})},message:this.state.errorMessage}))}},{key:"showMessage",value:function(e){}},{key:"onPasswdChange",value:function(e){var a=e.target.value;this.setState({senha:a})}},{key:"onChange",value:function(e){var a=e.target.value,t=e.target.id,n=this.state.user;n[t]=a,this.setState({user:n})}},{key:"registerUser",value:function(e){var a=e.user.uid,t=this.state.teacherId,n=this.state.user;n.id=a,this.daoProfessor.autorizarUsuario(a,n),this.daoProfessor.apagarTeacher(t)}},{key:"onClick",value:function(e){var a=this;if(this.state.user.name){var t=this.state.user.email,n=this.state.senha;this.props.firebase.doSignUp(t,n,this.registerUser,(function(e){return console.log(e)}))}else this.daoProfessor.carregarDadosIniciaisProfessor(this.state.user.email,(function(e){if(e){var t=e.id;delete e.id;var n=a.state.user;a.setState({teacherId:t,user:Object(U.a)({},n,{},e)})}else a.setState({errorMessage:"Usu\xe1rio inexistente"})}))}},{key:"carregarDadosProfessor",value:function(e){}}]),a}(r.a.Component)),de={name:"",n_borrowed:0,n_lent:0,n_read:0,email:"",phone:"",profiles:{professor:!0}},fe=he,be=function(){function e(a){Object(s.a)(this,e),this.firebase=a,this.getLivros=this.getLivros.bind(this),this.getLivrosPorProfessor=this.getLivrosPorProfessor.bind(this)}return Object(l.a)(e,[{key:"updateBook",value:function(e,a,t){this.firebase.firestore.collection("books").doc(e.id).set(e).then(a,(function(e){return t(e)}))}},{key:"getLivrosPorProfessor",value:function(e,a){new J(this.firebase).getTurmasPorProfessor(e,a)}},{key:"getLivros",value:function(e,a){var t=this,n=[];e.forEach((function(e){e.members&&e.members.forEach((function(e){n.find((function(a){return a.id===e.id}))||n.push(e)}))}));var r=[];n.forEach((function(e){t.firebase.firestore.collection("books").where("owner.id","==",e.id).get().then((function(e){e.empty||(e.docs.forEach((function(e){var a=e.data();a.id=e.id,r.push(a)})),a(r))}))}))}}]),e}(),ve=t(155),pe=t(156),Ee=t(86),ge=t.n(Ee),Ce=t(58),ke=t.n(Ce),je=t(87),Oe=t.n(je);function ye(e){function a(){t.inactive=!t.inactive,n.updateBook(t,e.confirmUpdate)}var t=e.book,n=e.daoLivro;return t.inactive?r.a.createElement(L.a,{variant:"contained",color:"primary",onClick:a},"Ativar"):r.a.createElement(L.a,{variant:"contained",color:"secondary",onClick:a},"Desativar")}function Se(e){return r.a.createElement(ve.a,{value:e.estadoLivros,showLabels:!0,onChange:e.onChange},r.a.createElement(pe.a,{value:"ALL",label:"Todos",icon:r.a.createElement(ge.a,null)}),r.a.createElement(pe.a,{value:"AVAILABLE",label:"Dispon\xedveis",icon:r.a.createElement(Oe.a,null)}),r.a.createElement(pe.a,{value:"RENT",label:"Emprestados",icon:r.a.createElement(ke.a,null)}))}var Pe=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={estadoLivros:"ALL",livrosSemFiltro:[],livros:[]},t.dao=new be(t.props.firebase),t.onChangeBookFilter=t.onChangeBookFilter.bind(Object(m.a)(t)),t.onChangeTermoPesquisado=t.onChangeTermoPesquisado.bind(Object(m.a)(t)),t.confirmarAtualizacao=t.confirmarAtualizacao.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.state.livrosSemFiltro?r.a.createElement(A.a,{fixed:!0},r.a.createElement(Se,{estadoLivros:this.state.estadoLivros,onChange:this.onChangeBookFilter}),r.a.createElement(w.a,{fullWidth:!0,id:"edtTitle",label:"Pesquisar",placeholder:"Digite o t\xedtulo desejado",margin:"normal",variant:"outlined",onChange:this.onChangeTermoPesquisado,value:this.state.termoPesquisado}),r.a.createElement(N.a,null,r.a.createElement(B.a,null,r.a.createElement(x.a,null,r.a.createElement(W.a,{align:"center"},"Mudar status"),r.a.createElement(W.a,{align:"center"},"T\xedtulo"),r.a.createElement(W.a,{align:"center"},"Propriet\xe1rio"),r.a.createElement(W.a,{align:"center"},"Status"),"RENT"===this.state.estadoLivros?r.a.createElement(W.a,{align:"center"},"Devolver"):null)),r.a.createElement(M.a,null,this.state.livros.map((function(a,t){return r.a.createElement(x.a,{key:t,id:t,name:t},r.a.createElement(W.a,{align:"center"}," ",r.a.createElement(ye,{book:a,daoLivro:e.dao,confirmUpdate:e.confirmarAtualizacao})," "),r.a.createElement(W.a,{align:"center"}," ",a.title," "),r.a.createElement(W.a,{align:"center"}," ",a.owner.name),r.a.createElement(W.a,{align:"center"}," ",a.status),"RENT"===e.state.estadoLivros?r.a.createElement(W.a,{align:"center"},r.a.createElement(L.a,{variant:"outlined",color:"secondary"},"Devolver")):null)}))))):r.a.createElement("h1",null,"Carregando livros")}},{key:"onChangeTermoPesquisado",value:function(e){var a=e.target.value;if(a.length<3){var t=this.state.livrosSemFiltro;this.setState({livros:t})}else{var n=this.state.livrosSemFiltro.filter((function(e){return e.title.startsWith(a)}));this.setState({livros:n})}}},{key:"onChangeBookFilter",value:function(e,a){"ALL"===a?this.setState({estadoLivros:a,livros:this.state.allBooks,livrosSemFiltro:this.state.allBooks}):"AVAILABLE"===a?this.setState({estadoLivros:a,livros:this.state.availableBooks,livrosSemFiltro:this.state.availableBooks}):this.setState({estadoLivros:a,livros:this.state.rentBooks,livrosSemFiltro:this.state.rentBooks})}},{key:"confirmarAtualizacao",value:function(){this.setState({lastUpdate:Date.now()})}},{key:"componentDidMount",value:function(){var e=this;this.dao.getLivrosPorProfessor(this.props.authUser.id,(function(a){e.dao.getLivros(a,(function(a){var t=a,n=[],r=[],i=t;a.forEach((function(e){"AVAILABLE"===e.status?n.push(e):r.push(e)})),e.setState({allBooks:t,availableBooks:n,rentBooks:r,livros:i,livrosSemFiltro:i})}))}))}}]),a}(r.a.Component)),Ue=function(){function e(a){Object(s.a)(this,e),this.firebase=a}return Object(l.a)(e,[{key:"getRegistros",value:function(e,a){var t=this,n=[];e.forEach((function(e){t.firebase.firestore.collection("registers").where("book.id","==",e.id).get().then((function(e){e.empty||(e.docs.forEach((function(e){var a=e.data();a.id=e.id,n.push(a)})),a(n))}))}))}}]),e}(),we=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={},t.daoLivro=new be(t.props.firebase),t.dao=new Ue(t.props.firebase),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.state.registros?this.state.registros.length?r.a.createElement(A.a,null,r.a.createElement(N.a,null,r.a.createElement(B.a,null,r.a.createElement(x.a,null,r.a.createElement(W.a,{align:"center"},"T\xedtulo"),r.a.createElement(W.a,{align:"center"},"Propriet\xe1rio"),r.a.createElement(W.a,{align:"center"},"Evento"))),r.a.createElement(M.a,null,this.state.registros.map((function(e,a){return r.a.createElement(x.a,{key:a,id:a,name:a},r.a.createElement(W.a,{align:"center"}," ",e.book.title," "),r.a.createElement(W.a,{align:"center"}," ",e.book.owner.name," "),r.a.createElement(W.a,{align:"center"}," ",e.libraryEvent," "))}))))):r.a.createElement("h1",null,"N\xe3o h\xe1 registros"):r.a.createElement("h1",null,"Carregando registros")}},{key:"componentDidMount",value:function(){var e=this;this.daoLivro.getLivrosPorProfessor(this.props.authUser.id,(function(a){e.daoLivro.getLivros(a,(function(a){e.dao.getRegistros(a,(function(a){return e.setState({registros:a})}))}))}))}}]),a}(r.a.Component)),Le=function(){function e(a){Object(s.a)(this,e),this.firebase=a}return Object(l.a)(e,[{key:"updateUser",value:function(e,a,t){this.firebase.firestore.collection("user").doc(e.id).set(e).then(a).catch((function(e){return t(e)}))}},{key:"findUser",value:function(e,a,t){this.firebase.firestore.collection("user").doc(e).get().then((function(e){return a(e.data())})).catch((function(e){return t(e)}))}}]),e}(),Ae=t(88),De=t.n(Ae);function Te(e){return e.member.inactive?r.a.createElement(ke.a,null):r.a.createElement(De.a,null)}function ze(e){function a(){var a=e.member;a.inactive=!a.inactive,e.daoUser.updateUser(a,e.confirm,(function(e){return console.log(e.message)}))}return e.member.inactive?r.a.createElement("span",{onClick:a},"Ativar"):r.a.createElement("span",{onClick:a},"Desativar")}var Ne=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={},t.daoTurma=new J(t.props.firebase),t.daoUser=new Le(t.props.firebase),t.confirmUpdate=t.confirmUpdate.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.props.location.search&&"?turma="===this.props.location.search.substr(0,7)?this.state.users?this.state.users.length?r.a.createElement(A.a,{fixed:!0},r.a.createElement("h1",null,this.state.turma.name),r.a.createElement(N.a,null,r.a.createElement(B.a,null,r.a.createElement(x.a,null,r.a.createElement(W.a,{align:"center"},"Nome"),r.a.createElement(W.a,{align:"center"},"Email"),r.a.createElement(W.a,{align:"center"},"Estado"),r.a.createElement(W.a,{align:"center"},"A\xe7\xe3o"))),r.a.createElement(M.a,null,this.state.users.map((function(a,t){return r.a.createElement(x.a,{key:t,id:t,name:t},r.a.createElement(W.a,{align:"center"},a.name),r.a.createElement(W.a,{align:"center"},a.email),r.a.createElement(W.a,{align:"center"}," ",r.a.createElement(Te,{member:a})," "),r.a.createElement(W.a,{align:"center"},r.a.createElement(ze,{member:a,daoUser:e.daoUser,confirm:e.confirmUpdate})))}))))):r.a.createElement("h1",null,"Turma n\xe3o cont\xe9m membros"):r.a.createElement("h1",null,"Carregando dados dos alunos"):r.a.createElement(T.a,{to:"/turma/professor"})}},{key:"componentDidMount",value:function(){var e=this,a=[],t=this.props.location.search.substr(7);this.daoTurma.getAlunoPorTurma(t,(function(t){e.setState({turma:t}),t.members.forEach((function(t){return e.daoUser.findUser(t.id,(function(t){a.push(t),e.setState({users:a})}),(function(e){return console.log(e)}))}))}),(function(e){return console.log(e)}))}},{key:"confirmUpdate",value:function(){this.setState({ultimaAtualizacao:Date.now()})}}]),a}(r.a.Component)),We=t(89),Be=t.n(We),Me=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={},t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(A.a,{fixed:!0},r.a.createElement("center",null,r.a.createElement("div",null,r.a.createElement("h1",null,"Download apk Leiturama"),r.a.createElement("a",{target:"_blank",href:"encurtador.com.br/krsA4"},r.a.createElement(Be.a,null)))))}}]),a}(r.a.Component);function xe(){return r.a.createElement("h1",null," Home ")}var Ie=g(function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).componentDidMount=function(){t.listener=t.props.firebase.auth.onAuthStateChanged((function(e){e?t.props.firebase.firestore.collection("user").doc(e.uid).get().then((function(e){if(e.exists){var a=e.data();t.setState({authUser:a})}else console.log("Usu\xe1rio n\xe3o autorizado pelo sistema")})).catch((function(e){console.log("Error getting document:",e)})):t.setState({authUser:null})}))},t.state={authUser:null},t.setAuthUser=t.setAuthUser.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.state.authUser?this.state.authUser.profiles.administrator?r.a.createElement(A.a,{maxWidth:"lg",className:"app"},r.a.createElement(d.a,null,r.a.createElement(S,{authUser:this.state.authUser}),r.a.createElement(T.d,null,r.a.createElement(T.b,{path:"/",exact:!0,component:xe}),r.a.createElement(T.b,{path:"/escola",component:D}),r.a.createElement(T.b,{path:"/professor",component:re}),r.a.createElement(T.b,{path:"/turma",component:ae})))):this.state.authUser.profiles.professor?r.a.createElement(A.a,{maxWidth:"lg",className:"app"},r.a.createElement(d.a,null,r.a.createElement(S,{authUser:this.state.authUser}),r.a.createElement(T.d,null,r.a.createElement(T.b,{path:"/",exact:!0,component:xe}),r.a.createElement(T.b,{path:"/turma/professor"},r.a.createElement(ee,{authUser:this.state.authUser})),r.a.createElement(T.b,{path:"/livros/professor",exact:!0},r.a.createElement(Pe,{authUser:this.state.authUser})),r.a.createElement(T.b,{path:"/registros"},r.a.createElement(we,{authUser:this.state.authUser})),r.a.createElement(T.b,{path:"/turma/alunos",component:Ne})))):this.state.authUser.profiles.student?r.a.createElement("div",null,"Aluno n\xe3o possui funcionalidades na plataforma Web"):void 0:r.a.createElement(A.a,{maxWidth:"lg",className:"app"},r.a.createElement(d.a,null,r.a.createElement(S,{authUser:this.state.authUser}),r.a.createElement(T.d,null,r.a.createElement(T.b,{path:"/esqueci_senha",component:ce}),r.a.createElement(T.b,{path:"/professor/primeiroacesso",component:fe}),r.a.createElement(T.b,{path:"/download",component:Me}),r.a.createElement(T.b,{path:"/",component:ue}))))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"setAuthUser",value:function(e){this.setState({authUser:e})}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(C.Provider,{value:new k},r.a.createElement(Ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},66:function(e,a,t){e.exports=t.p+"static/media/logo.3aae021c.png"},78:function(e,a,t){},98:function(e,a,t){e.exports=t(115)}},[[98,1,2]]]);
//# sourceMappingURL=main.e1d15f00.chunk.js.map